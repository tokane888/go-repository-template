pre-commit:
  commands:
    go-fumpt:
      run: echo "{staged_files}" | grep '\.go$' | xargs -r gofumpt -l -w
      stage_fixed: true
    go-vet:
      run: echo "{staged_files}" | grep '\.go$' | xargs -r go vet
    dprint-fmt:
      run: |
        files=$(echo "{staged_files}" | grep -E '(Dockerfile$|\.json$|\.md$|\.ya?ml$)' || true)
        if [ -n "$files" ]; then
          echo "$files" # フォーマット対象のファイル名出力(go fmt等では出力されるが、dprintでは出力されないため)
          echo "$files" | xargs -r dprint fmt
        fi
      stage_fixed: true
